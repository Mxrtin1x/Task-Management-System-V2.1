<div class="container mt-2 mb-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
          <h4 class="mb-0">Edit Task</h4>
        </div>
        <div class="card-body">
          <%= form_with(model: @task, local: true, class: "needs-validation") do |form| %>
            <div class="mb-3">
              <%= form.label :title, "Title", class: "form-label" %>
              <%= form.text_field :title, class: "form-control", placeholder: "Enter the task title", required: true %>
            </div>

            <div class="mb-3">
              <%= form.label :description, "Description", class: "form-label" %>
              <%= form.text_area :description, class: "form-control", rows: 3, placeholder: "Enter the task description" %>
            </div>

            <!--<div class="mb-3">
              <%= form.label :due_date, "Due Date", class: "form-label" %>
              <%= form.date_select :due_date, { class: "form-control" } %>
            </div>-->
            <div class="mb-3">
              <%= form.label :due_date, "Due Date", class: "form-label" %>
              <div class="input-group">
                <span class="input-group-text">
                  <i class="fas fa-calendar-alt"></i>
                </span>
                <%= form.text_field :due_date, class: "form-control", id: "due_date_picker", placeholder: "MM/DD/YYYY", required: true %>
              </div>
            </div>
            
            <div class="mb-3">
              <%= form.label :priority, "Priority", class: "form-label" %>
              <%= form.select :priority, ["Low", "Medium", "High"], {}, class: "form-select" %>
            </div>

            <div class="mb-3">
              <%= form.label :status, "Status", class: "form-label" %>
              <%= form.select :status, ["Pending", "Completed"], {}, class: "form-select" %>
            </div>

            <div class="d-flex justify-content-between">
              <%= form.submit "Update Task", class: "btn btn-primary" %>
              <%= link_to "Back to Tasks", tasks_path, class: "btn btn-secondary" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Initialize the datepicker with disabled past dates
  document.addEventListener("DOMContentLoaded", function () {
    flatpickr("#due_date_picker", {
      dateFormat: "m/d/Y", // Format: mm/dd/yyyy
      minDate: "today",    // Disables past dates
      allowInput: true,    // Allows manual input
    });
  });
</script>
<link href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>